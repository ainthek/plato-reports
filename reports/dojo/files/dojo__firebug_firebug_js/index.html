<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - dojo/_firebug/firebug.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>dojo/_firebug/firebug.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">63.57</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">1191</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">86.04</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">12.29</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">define([
	&quot;../_base/kernel&quot;,
	&quot;require&quot;,
	&quot;../_base/html&quot;,
	&quot;../sniff&quot;,
	&quot;../_base/array&quot;,
	&quot;../_base/lang&quot;,
	&quot;../_base/event&quot;,
	&quot;../_base/unload&quot;], function(dojo, require, html, has){

	// module:
	//		dojo/_firebug/firebug
	// summary:
	//		Firebug Lite, the baby brother to Joe Hewitt&#039;s Firebug for Mozilla Firefox
	// description:
	//		Opens a console for logging, debugging, and error messages.
	//		Contains partial functionality to Firebug. See function list below.
	//
	//		NOTE:
	//		Firebug is a Firefox extension created by Joe Hewitt (see license). You do not need Dojo to run Firebug.
	//		Firebug Lite is included in Dojo by permission from Joe Hewitt
	//		If you are new to Firebug, or used to the Dojo 0.4 dojo.debug, you can learn Firebug
	//		functionality by reading the function comments below or visiting http://www.getfirebug.com/docs.html
	//
	//		NOTE:
	//		To test Firebug Lite in Firefox:
	//
	//		- FF2: set &quot;console = null&quot; before loading dojo and set djConfig.isDebug=true
	//		- FF3: disable Firebug and set djConfig.isDebug=true
	//
	// example:
	//		Supports inline objects in object inspector window (only simple trace of dom nodes, however)
	//	|	console.log(&quot;my object&quot;, {foo:&quot;bar&quot;})
	// example:
	//		Option for console to open in popup window
	//	|	var djConfig = {isDebug: true, popup:true };
	// example:
	//		Option for console height (ignored for popup)
	//	|	var djConfig = {isDebug: true, debugHeight:100 }


	var isNewIE = (/Trident/.test(window.navigator.userAgent));
	if(isNewIE){
		// Fixing IE&#039;s console
		// IE doesn&#039;t insert space between arguments. How annoying.
		var calls = [&quot;log&quot;, &quot;info&quot;, &quot;debug&quot;, &quot;warn&quot;, &quot;error&quot;];
		for(var i=0;i&lt;calls.length;i++){
			var m = calls[i];
			if(!console[m] ||console[m]._fake){
				// IE9 doesn&#039;t have console.debug method, a fake one is added later
				continue;
			}
			var n = &quot;_&quot;+calls[i];
			console[n] = console[m];
			console[m] = (function(){
				var type = n;
				return function(){
					console[type](Array.prototype.join.call(arguments, &quot; &quot;));
				};
			})();
		}
		// clear the console on load. This is more than a convenience - too many logs crashes it.
		// If closed it throws an error
		try{ console.clear(); }catch(e){}
	}

	if(
		has(&quot;ff&quot;) ||								// Firefox has Firebug
		has(&quot;chrome&quot;) ||							// Chrome 3+ has a console
		has(&quot;safari&quot;) ||							// Safari 4 has a console
		isNewIE ||									// Has the new IE console
		window.firebug ||							// Testing for mozilla firebug lite
		(typeof console != &quot;undefined&quot; &amp;&amp; console.firebug) || //The firebug console
		dojo.config.useCustomLogger ||				// Allow custom loggers
		has(&quot;air&quot;)									// isDebug triggers AIRInsector, not Firebug
	){
		return;
	}

	// don&#039;t build firebug in iframes
	try{
		if(window != window.parent){
			// but if we&#039;ve got a parent logger, connect to it
			if(window.parent[&quot;console&quot;]){
				window.console = window.parent.console;
			}
			return;
		}
	}catch(e){/*squelch*/}

	// ***************************************************************************
	// Placing these variables before the functions that use them to avoid a
	// shrinksafe bug where variable renaming does not happen correctly otherwise.

	// most of the objects in this script are run anonomously
	var _firebugDoc = document;
	var _firebugWin = window;
	var __consoleAnchorId__ = 0;

	var consoleFrame = null;
	var consoleBody = null;
	var consoleObjectInspector = null;
	var fireBugTabs = null;
	var commandLine = null;
	var consoleToolbar = null;

	var frameVisible = false;
	var messageQueue = [];
	var groupStack = [];
	var timeMap = {};
	var countMap = {};

	var consoleDomInspector = null;
	var _inspectionMoveConnection;
	var _inspectionClickConnection;
	var _inspectionEnabled = false;
	var _inspectionTimer = null;
	var _inspectTempNode = document.createElement(&quot;div&quot;);


	var _inspectCurrentNode;
	var _restoreBorderStyle;

	// ***************************************************************************

	window.console = {
		_connects: [],
		log: function(){
			// summary:
			//		Sends arguments to console.
			logFormatted(arguments, &quot;&quot;);
		},

		debug: function(){
			// summary:
			//		Sends arguments to console. Missing finctionality to show script line of trace.
			logFormatted(arguments, &quot;debug&quot;);
		},

		info: function(){
			// summary:
			//		Sends arguments to console, highlighted with (I) icon.
			logFormatted(arguments, &quot;info&quot;);
		},

		warn: function(){
			// summary:
			//		Sends warning arguments to console, highlighted with (!) icon and blue style.
			logFormatted(arguments, &quot;warning&quot;);
		},

		error: function(){
			// summary:
			//		Sends error arguments (object) to console, highlighted with (X) icon and yellow style
			//		NEW: error object now displays in object inspector
			logFormatted(arguments, &quot;error&quot;);
		},

		assert: function(truth, message){
			// summary:
			//		Tests for true. Throws exception if false.
			if(!truth){
				var args = [];
				for(var i = 1; i &lt; arguments.length; ++i){
					args.push(arguments[i]);
				}

				logFormatted(args.length ? args : [&quot;Assertion Failure&quot;], &quot;error&quot;);
				throw message ? message : &quot;Assertion Failure&quot;;
			}
		},

		dir: function(obj){
			var str = printObject( obj );
			str = str.replace(/\n/g, &quot;&lt;br /&gt;&quot;);
			str = str.replace(/\t/g, &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;);
			logRow([str], &quot;dir&quot;);
		},

		dirxml: function(node){
			var html = [];
			appendNode(node, html);
			logRow(html, &quot;dirxml&quot;);
		},

		group: function(){
			// summary:
			//		collects log messages into a group, starting with this call and ending with
			//		groupEnd(). Missing collapse functionality
			logRow(arguments, &quot;group&quot;, pushGroup);
		},

		groupEnd: function(){
			// summary:
			//		Closes group. See above
			logRow(arguments, &quot;&quot;, popGroup);
		},

		time: function(name){
			// summary:
			//		Starts timers assigned to name given in argument. Timer stops and displays on timeEnd(title);
			// example:
			//	|	console.time(&quot;load&quot;);
			//	|	console.time(&quot;myFunction&quot;);
			//	|	console.timeEnd(&quot;load&quot;);
			//	|	console.timeEnd(&quot;myFunction&quot;);
			timeMap[name] = new Date().getTime();
		},

		timeEnd: function(name){
			// summary:
			//		See above.
			if(name in timeMap){
				var delta = (new Date()).getTime() - timeMap[name];
				logFormatted([name+ &quot;:&quot;, delta+&quot;ms&quot;]);
				delete timeMap[name];
			}
		},

		count: function(name){
			// summary:
			//		Not supported
			if(!countMap[name]) countMap[name] = 0;
			countMap[name]++;
			logFormatted([name+&quot;: &quot;+countMap[name]]);
		},

		trace: function(_value){
			var stackAmt = _value || 3;
			var f = console.trace.caller; //function that called trace
			console.log(&quot;&gt;&gt;&gt; console.trace(stack)&quot;);
			for(var i=0;i&lt;stackAmt;i++){
				var func = f.toString();
				var args=[];
				for (var a = 0; a &lt; f.arguments.length; a++){
					args.push(f.arguments[a]);
				}
				if(f.arguments.length){
					console.dir({&quot;function&quot;:func, &quot;arguments&quot;:args});
				}else{
					console.dir({&quot;function&quot;:func});
				}

				f = f.caller;
			}
		},

		profile: function(){
			// summary:
			//		Not supported
			this.warn([&quot;profile() not supported.&quot;]);
		},

		profileEnd: function(){ },

		clear: function(){
			// summary:
			//		Clears message console. Do not call this directly
			if(consoleBody){
				while(consoleBody.childNodes.length){
					dojo.destroy(consoleBody.firstChild);
				}
			}
			dojo.forEach(this._connects,dojo.disconnect);
		},

		open: function(){
			// summary:
			//		Opens message console. Do not call this directly
			toggleConsole(true);
		},

		close: function(){
			// summary:
			//		Closes message console. Do not call this directly
			if(frameVisible){
				toggleConsole();
			}
		},
		_restoreBorder: function(){
			if(_inspectCurrentNode){
				_inspectCurrentNode.style.border = _restoreBorderStyle;
			}
		},
		openDomInspector: function(){
			_inspectionEnabled = true;
			consoleBody.style.display = &quot;none&quot;;
			consoleDomInspector.style.display = &quot;block&quot;;
			consoleObjectInspector.style.display = &quot;none&quot;;
			document.body.style.cursor = &quot;pointer&quot;;
			_inspectionMoveConnection = dojo.connect(document, &quot;mousemove&quot;, function(evt){
				if(!_inspectionEnabled){ return; }
				if(!_inspectionTimer){
					_inspectionTimer = setTimeout(function(){ _inspectionTimer = null; }, 50);
				}else{
					return;
				}
				var node = evt.target;
				if(node &amp;&amp; (_inspectCurrentNode !== node)){
					var parent = true;

					console._restoreBorder();
					var html = [];
					appendNode(node, html);
					consoleDomInspector.innerHTML = html.join(&quot;&quot;);

					_inspectCurrentNode = node;
					_restoreBorderStyle = _inspectCurrentNode.style.border;
					_inspectCurrentNode.style.border = &quot;#0000FF 1px solid&quot;;
				}
			});
			setTimeout(function(){
				_inspectionClickConnection = dojo.connect(document, &quot;click&quot;, function(evt){
					document.body.style.cursor = &quot;&quot;;
					_inspectionEnabled = !_inspectionEnabled;
					dojo.disconnect(_inspectionClickConnection);
					// console._restoreBorder();
				});
			}, 30);
		},
		_closeDomInspector: function(){
			document.body.style.cursor = &quot;&quot;;
			dojo.disconnect(_inspectionMoveConnection);
			dojo.disconnect(_inspectionClickConnection);
			_inspectionEnabled = false;
			console._restoreBorder();
		},
		openConsole:function(){
			// summary:
			//		Closes object inspector and opens message console. Do not call this directly
			consoleBody.style.display = &quot;block&quot;;
			consoleDomInspector.style.display = &quot;none&quot;;
			consoleObjectInspector.style.display = &quot;none&quot;;
			console._closeDomInspector();
		},
		openObjectInspector:function(){
			consoleBody.style.display = &quot;none&quot;;
			consoleDomInspector.style.display = &quot;none&quot;;
			consoleObjectInspector.style.display = &quot;block&quot;;
			console._closeDomInspector();
		},
		recss: function(){
			// this is placed in dojo since the console is most likely
			// in another window and dojo is easily accessible
			var i,a,s;a=document.getElementsByTagName(&#039;link&#039;);
			for(i=0;i&lt;a.length;i++){
				s=a[i];
				if(s.rel.toLowerCase().indexOf(&#039;stylesheet&#039;)&gt;=0&amp;&amp;s.href){
					var h=s.href.replace(/(&amp;|%5C?)forceReload=\d+/,&#039;&#039;);
					s.href=h+(h.indexOf(&#039;?&#039;)&gt;=0?&#039;&amp;&#039;:&#039;?&#039;)+&#039;forceReload=&#039;+new Date().valueOf();
				}
			}
		}
	};

	// ***************************************************************************

	function toggleConsole(forceOpen){
		frameVisible = forceOpen || !frameVisible;
		if(consoleFrame){
			consoleFrame.style.display = frameVisible ? &quot;block&quot; : &quot;none&quot;;
		}
	}

	function focusCommandLine(){
		toggleConsole(true);
		if(commandLine){
			commandLine.focus();
		}
	}

	function openWin(x,y,w,h){
		var win = window.open(&quot;&quot;,&quot;_firebug&quot;,&quot;status=0,menubar=0,resizable=1,top=&quot;+y+&quot;,left=&quot;+x+&quot;,width=&quot;+w+&quot;,height=&quot;+h+&quot;,scrollbars=1,addressbar=0&quot;);
		if(!win){
			var msg = &quot;Firebug Lite could not open a pop-up window, most likely because of a blocker.\n&quot; +
				&quot;Either enable pop-ups for this domain, or change the djConfig to popup=false.&quot;;
			alert(msg);
		}
		createResizeHandler(win);
		var newDoc=win.document;
		//Safari needs an HTML height
		var HTMLstring=	&#039;&lt;html style=&quot;height:100%;&quot;&gt;&lt;head&gt;&lt;title&gt;Firebug Lite&lt;/title&gt;&lt;/head&gt;\n&#039; +
					&#039;&lt;body bgColor=&quot;#ccc&quot; style=&quot;height:97%;&quot; onresize=&quot;opener.onFirebugResize()&quot;&gt;\n&#039; +
					&#039;&lt;div id=&quot;fb&quot;&gt;&lt;/div&gt;&#039; +
					&#039;&lt;/body&gt;&lt;/html&gt;&#039;;

		newDoc.write(HTMLstring);
		newDoc.close();
		return win;
	}

	function createResizeHandler(wn){
		// summary:
		//		Creates handle for onresize window. Called from script in popup&#039;s body tag (so that it will work with IE).
		//

		var d = new Date();
			d.setTime(d.getTime()+(60*24*60*60*1000)); // 60 days
			d = d.toUTCString();

			var dc = wn.document,
				getViewport;

			if (wn.innerWidth){
				getViewport = function(){
					return{w:wn.innerWidth, h:wn.innerHeight};
				};
			}else if (dc.documentElement &amp;&amp; dc.documentElement.clientWidth){
				getViewport = function(){
					return{w:dc.documentElement.clientWidth, h:dc.documentElement.clientHeight};
				};
			}else if (dc.body){
				getViewport = function(){
					return{w:dc.body.clientWidth, h:dc.body.clientHeight};
				};
			}


		window.onFirebugResize = function(){

			//resize the height of the console log body
			layout(getViewport().h);

			clearInterval(wn._firebugWin_resize);
			wn._firebugWin_resize = setTimeout(function(){
				var x = wn.screenLeft,
					y = wn.screenTop,
					w = wn.outerWidth  || wn.document.body.offsetWidth,
					h = wn.outerHeight || wn.document.body.offsetHeight;

				document.cookie = &quot;_firebugPosition=&quot; + [x,y,w,h].join(&quot;,&quot;) + &quot;; expires=&quot;+d+&quot;; path=/&quot;;

			 }, 5000); //can&#039;t capture window.onMove - long timeout gives better chance of capturing a resize, then the move

		};
	}


	/*****************************************************************************/


	function createFrame(){
		if(consoleFrame){
			return;
		}
		toggleConsole(true);
		if(dojo.config.popup){
			var containerHeight = &quot;100%&quot;;
			var cookieMatch = document.cookie.match(/(?:^|; )_firebugPosition=([^;]*)/);
			var p = cookieMatch ? cookieMatch[1].split(&quot;,&quot;) : [2,2,320,480];

			_firebugWin = openWin(p[0],p[1],p[2],p[3]);	// global
			_firebugDoc = _firebugWin.document;			// global

			dojo.config.debugContainerId = &#039;fb&#039;;

			// connecting popup
			_firebugWin.console = window.console;
			_firebugWin.dojo = window.dojo;
		}else{
			_firebugDoc = document;
			containerHeight = (dojo.config.debugHeight || 300) + &quot;px&quot;;
		}

		var styleElement = _firebugDoc.createElement(&quot;link&quot;);
		styleElement.href = require.toUrl(&quot;./firebug.css&quot;);
		styleElement.rel = &quot;stylesheet&quot;;
		styleElement.type = &quot;text/css&quot;;
		var styleParent = _firebugDoc.getElementsByTagName(&quot;head&quot;);
		if(styleParent){
			styleParent = styleParent[0];
		}
		if(!styleParent){
			styleParent = _firebugDoc.getElementsByTagName(&quot;html&quot;)[0];
		}
		if(has(&quot;ie&quot;)){
			window.setTimeout(function(){ styleParent.appendChild(styleElement); }, 0);
		}else{
			styleParent.appendChild(styleElement);
		}

		if(dojo.config.debugContainerId){
			consoleFrame = _firebugDoc.getElementById(dojo.config.debugContainerId);
		}
		if(!consoleFrame){
			consoleFrame = _firebugDoc.createElement(&quot;div&quot;);
			_firebugDoc.body.appendChild(consoleFrame);
		}
		consoleFrame.className += &quot; firebug&quot;;
		consoleFrame.id = &quot;firebug&quot;;
		consoleFrame.style.height = containerHeight;
		consoleFrame.style.display = (frameVisible ? &quot;block&quot; : &quot;none&quot;);

		var buildLink = function(label, title, method, _class){
			return &#039;&lt;li class=&quot;&#039;+_class+&#039;&quot;&gt;&lt;a href=&quot;javascript:void(0);&quot; onclick=&quot;console.&#039;+ method +&#039;(); return false;&quot; title=&quot;&#039;+title+&#039;&quot;&gt;&#039;+label+&#039;&lt;/a&gt;&lt;/li&gt;&#039;;
		};
		consoleFrame.innerHTML =
			  &#039;&lt;div id=&quot;firebugToolbar&quot;&gt;&#039;
			+ &#039;  &lt;ul id=&quot;fireBugTabs&quot; class=&quot;tabs&quot;&gt;&#039;

			+ buildLink(&quot;Clear&quot;, &quot;Remove All Console Logs&quot;, &quot;clear&quot;, &quot;&quot;)
			+ buildLink(&quot;ReCSS&quot;, &quot;Refresh CSS without reloading page&quot;, &quot;recss&quot;, &quot;&quot;)

			+ buildLink(&quot;Console&quot;, &quot;Show Console Logs&quot;, &quot;openConsole&quot;, &quot;gap&quot;)
			+ buildLink(&quot;DOM&quot;, &quot;Show DOM Inspector&quot;, &quot;openDomInspector&quot;, &quot;&quot;)
			+ buildLink(&quot;Object&quot;, &quot;Show Object Inspector&quot;, &quot;openObjectInspector&quot;, &quot;&quot;)
			+ ((dojo.config.popup) ? &quot;&quot; : buildLink(&quot;Close&quot;, &quot;Close the console&quot;, &quot;close&quot;, &quot;gap&quot;))

			+ &#039;	&lt;/ul&gt;&#039;
			+ &#039;&lt;/div&gt;&#039;
			+ &#039;&lt;input type=&quot;text&quot; id=&quot;firebugCommandLine&quot; /&gt;&#039;
			+ &#039;&lt;div id=&quot;firebugLog&quot;&gt;&lt;/div&gt;&#039;
			+ &#039;&lt;div id=&quot;objectLog&quot; style=&quot;display:none;&quot;&gt;Click on an object in the Log display&lt;/div&gt;&#039;
			+ &#039;&lt;div id=&quot;domInspect&quot; style=&quot;display:none;&quot;&gt;Hover over HTML elements in the main page. Click to hold selection.&lt;/div&gt;&#039;;


		consoleToolbar = _firebugDoc.getElementById(&quot;firebugToolbar&quot;);

		commandLine = _firebugDoc.getElementById(&quot;firebugCommandLine&quot;);
		addEvent(commandLine, &quot;keydown&quot;, onCommandLineKeyDown);

		addEvent(_firebugDoc, has(&quot;ie&quot;) || has(&quot;safari&quot;) ? &quot;keydown&quot; : &quot;keypress&quot;, onKeyDown);

		consoleBody = _firebugDoc.getElementById(&quot;firebugLog&quot;);
		consoleObjectInspector = _firebugDoc.getElementById(&quot;objectLog&quot;);
		consoleDomInspector = _firebugDoc.getElementById(&quot;domInspect&quot;);
		fireBugTabs = _firebugDoc.getElementById(&quot;fireBugTabs&quot;);
		layout();
		flush();
	}

	dojo.addOnLoad(createFrame);

	function clearFrame(){
		_firebugDoc = null;

		if(_firebugWin.console){
			_firebugWin.console.clear();
		}
		_firebugWin = null;
		consoleFrame = null;
		consoleBody = null;
		consoleObjectInspector = null;
		consoleDomInspector = null;
		commandLine = null;
		messageQueue = [];
		groupStack = [];
		timeMap = {};
	}


	function evalCommandLine(){
		var text = commandLine.value;
		commandLine.value = &quot;&quot;;

		logRow([&quot;&gt;  &quot;, text], &quot;command&quot;);

		var value;
		try{
			value = eval(text);
		}catch(e){
			console.debug(e); // put exception on the console
		}

		console.log(value);
	}

	function layout(h){
		var tHeight = 25; //consoleToolbar.offsetHeight; // tab style not ready on load - throws off layout
		var height = h ?
			h  - (tHeight + commandLine.offsetHeight +25 + (h*.01)) + &quot;px&quot; :
			(consoleFrame.offsetHeight - tHeight - commandLine.offsetHeight) + &quot;px&quot;;

		consoleBody.style.top = tHeight + &quot;px&quot;;
		consoleBody.style.height = height;
		consoleObjectInspector.style.height = height;
		consoleObjectInspector.style.top = tHeight + &quot;px&quot;;
		consoleDomInspector.style.height = height;
		consoleDomInspector.style.top = tHeight + &quot;px&quot;;
		commandLine.style.bottom = 0;

		dojo.addOnWindowUnload(clearFrame);
	}

	function logRow(message, className, handler){
		if(consoleBody){
			writeMessage(message, className, handler);
		}else{
			messageQueue.push([message, className, handler]);
		}
	}

	function flush(){
		var queue = messageQueue;
		messageQueue = [];

		for(var i = 0; i &lt; queue.length; ++i){
			writeMessage(queue[i][0], queue[i][1], queue[i][2]);
		}
	}

	function writeMessage(message, className, handler){
		var isScrolledToBottom =
			consoleBody.scrollTop + consoleBody.offsetHeight &gt;= consoleBody.scrollHeight;

		handler = handler||writeRow;

		handler(message, className);

		if(isScrolledToBottom){
			consoleBody.scrollTop = consoleBody.scrollHeight - consoleBody.offsetHeight;
		}
	}

	function appendRow(row){
		var container = groupStack.length ? groupStack[groupStack.length-1] : consoleBody;
		container.appendChild(row);
	}

	function writeRow(message, className){
		var row = consoleBody.ownerDocument.createElement(&quot;div&quot;);
		row.className = &quot;logRow&quot; + (className ? &quot; logRow-&quot;+className : &quot;&quot;);
		row.innerHTML = message.join(&quot;&quot;);
		appendRow(row);
	}

	function pushGroup(message, className){
		logFormatted(message, className);

		//var groupRow = consoleBody.ownerDocument.createElement(&quot;div&quot;);
		//groupRow.className = &quot;logGroup&quot;;
		var groupRowBox = consoleBody.ownerDocument.createElement(&quot;div&quot;);
		groupRowBox.className = &quot;logGroupBox&quot;;
		//groupRow.appendChild(groupRowBox);
		appendRow(groupRowBox);
		groupStack.push(groupRowBox);
	}

	function popGroup(){
		groupStack.pop();
	}

	// ***************************************************************************

	function logFormatted(objects, className){
		var html = [];

		var format = objects[0];
		var objIndex = 0;

		if(typeof(format) != &quot;string&quot;){
			format = &quot;&quot;;
			objIndex = -1;
		}

		var parts = parseFormat(format);

		for(var i = 0; i &lt; parts.length; ++i){
			var part = parts[i];
			if(part &amp;&amp; typeof part == &quot;object&quot;){
				part.appender(objects[++objIndex], html);
			}else{
				appendText(part, html);
			}
		}


		var ids = [];
		var obs = [];
		for(i = objIndex+1; i &lt; objects.length; ++i){
			appendText(&quot; &quot;, html);

			var object = objects[i];
			if(object === undefined || object === null ){
				appendNull(object, html);

			}else if(typeof(object) == &quot;string&quot;){
				appendText(object, html);

			}else if(object instanceof Date){
				appendText(object.toString(), html);

			}else if(object.nodeType == 9){
				appendText(&quot;[ XmlDoc ]&quot;, html);

			}else{
				// Create link for object inspector
				// need to create an ID for this link, since it is currently text
				var id = &quot;_a&quot; + __consoleAnchorId__++;
				ids.push(id);
				// need to save the object, so the arrays line up
				obs.push(object);
				var str = &#039;&lt;a id=&quot;&#039;+id+&#039;&quot; href=&quot;javascript:void(0);&quot;&gt;&#039;+getObjectAbbr(object)+&#039;&lt;/a&gt;&#039;;

				appendLink( str , html);
			}
		}

		logRow(html, className);

		// Now that the row is inserted in the DOM, loop through all of the links that were just created
		for(i=0; i&lt;ids.length; i++){
			var btn = _firebugDoc.getElementById(ids[i]);
			if(!btn){ continue; }

			// store the object in the dom btn for reference later
			// avoid parsing these objects unless necessary
			btn.obj = obs[i];

			_firebugWin.console._connects.push(dojo.connect(btn, &quot;onclick&quot;, function(){

				console.openObjectInspector();

				try{
					printObject(this.obj);
				}catch(e){
					this.obj = e;
				}
				consoleObjectInspector.innerHTML = &quot;&lt;pre&gt;&quot; + printObject( this.obj ) + &quot;&lt;/pre&gt;&quot;;
			}));
		}
	}

	function parseFormat(format){
		var parts = [];

		var reg = /((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;
		var appenderMap = {s: appendText, d: appendInteger, i: appendInteger, f: appendFloat};

		for(var m = reg.exec(format); m; m = reg.exec(format)){
			var type = m[8] ? m[8] : m[5];
			var appender = type in appenderMap ? appenderMap[type] : appendObject;
			var precision = m[3] ? parseInt(m[3]) : (m[4] == &quot;.&quot; ? -1 : 0);

			parts.push(format.substr(0, m[0][0] == &quot;%&quot; ? m.index : m.index+1));
			parts.push({appender: appender, precision: precision});

			format = format.substr(m.index+m[0].length);
		}

		parts.push(format);

		return parts;
	}

	function escapeHTML(value){
		function replaceChars(ch){
			switch(ch){
				case &quot;&lt;&quot;:
					return &quot;&amp;lt;&quot;;
				case &quot;&gt;&quot;:
					return &quot;&amp;gt;&quot;;
				case &quot;&amp;&quot;:
					return &quot;&amp;amp;&quot;;
				case &quot;&#039;&quot;:
					return &quot;&amp;#39;&quot;;
				case &#039;&quot;&#039;:
					return &quot;&amp;quot;&quot;;
			}
			return &quot;?&quot;;
		}
		return String(value).replace(/[&lt;&gt;&amp;&quot;&#039;]/g, replaceChars);
	}

	function objectToString(object){
		try{
			return object+&quot;&quot;;
		}catch(e){
			return null;
		}
	}

	// ***************************************************************************
	function appendLink(object, html){
		// needed for object links - no HTML escaping
		html.push( objectToString(object) );
	}

	function appendText(object, html){
		html.push(escapeHTML(objectToString(object)));
	}

	function appendNull(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-null&quot;&gt;&#039;, escapeHTML(objectToString(object)), &#039;&lt;/span&gt;&#039;);
	}

	function appendString(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-string&quot;&gt;&amp;quot;&#039;, escapeHTML(objectToString(object)),
			&#039;&amp;quot;&lt;/span&gt;&#039;);
	}

	function appendInteger(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-number&quot;&gt;&#039;, escapeHTML(objectToString(object)), &#039;&lt;/span&gt;&#039;);
	}

	function appendFloat(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-number&quot;&gt;&#039;, escapeHTML(objectToString(object)), &#039;&lt;/span&gt;&#039;);
	}

	function appendFunction(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-function&quot;&gt;&#039;, getObjectAbbr(object), &#039;&lt;/span&gt;&#039;);
	}

	function appendObject(object, html){
		try{
			if(object === undefined){
				appendNull(&quot;undefined&quot;, html);
			}else if(object === null){
				appendNull(&quot;null&quot;, html);
			}else if(typeof object == &quot;string&quot;){
				appendString(object, html);
			}else if(typeof object == &quot;number&quot;){
				appendInteger(object, html);
			}else if(typeof object == &quot;function&quot;){
				appendFunction(object, html);
			}else if(object.nodeType == 1){
				appendSelector(object, html);
			}else if(typeof object == &quot;object&quot;){
				appendObjectFormatted(object, html);
			}else{
				appendText(object, html);
			}
		}catch(e){
			/* squelch */
		}
	}

	function appendObjectFormatted(object, html){
		var text = objectToString(object);
		var reObject = /\[object (.*?)\]/;

		var m = reObject.exec(text);
		html.push(&#039;&lt;span class=&quot;objectBox-object&quot;&gt;&#039;, m ? m[1] : text, &#039;&lt;/span&gt;&#039;);
	}

	function appendSelector(object, html){
		html.push(&#039;&lt;span class=&quot;objectBox-selector&quot;&gt;&#039;);

		html.push(&#039;&lt;span class=&quot;selectorTag&quot;&gt;&#039;, escapeHTML(object.nodeName.toLowerCase()), &#039;&lt;/span&gt;&#039;);
		if(object.id){
			html.push(&#039;&lt;span class=&quot;selectorId&quot;&gt;#&#039;, escapeHTML(object.id), &#039;&lt;/span&gt;&#039;);
		}
		if(object.className){
			html.push(&#039;&lt;span class=&quot;selectorClass&quot;&gt;.&#039;, escapeHTML(object.className), &#039;&lt;/span&gt;&#039;);
		}

		html.push(&#039;&lt;/span&gt;&#039;);
	}

	function appendNode(node, html){
		if(node.nodeType == 1){
			html.push(
				&#039;&lt;div class=&quot;objectBox-element&quot;&gt;&#039;,
					&#039;&amp;lt;&lt;span class=&quot;nodeTag&quot;&gt;&#039;, node.nodeName.toLowerCase(), &#039;&lt;/span&gt;&#039;);

			for(var i = 0; i &lt; node.attributes.length; ++i){
				var attr = node.attributes[i];
				if(!attr.specified){ continue; }

				html.push(&#039;&amp;nbsp;&lt;span class=&quot;nodeName&quot;&gt;&#039;, attr.nodeName.toLowerCase(),
					&#039;&lt;/span&gt;=&amp;quot;&lt;span class=&quot;nodeValue&quot;&gt;&#039;, escapeHTML(attr.nodeValue),
					&#039;&lt;/span&gt;&amp;quot;&#039;);
			}

			if(node.firstChild){
				html.push(&#039;&amp;gt;&lt;/div&gt;&lt;div class=&quot;nodeChildren&quot;&gt;&#039;);

				for(var child = node.firstChild; child; child = child.nextSibling){
					appendNode(child, html);
				}

				html.push(&#039;&lt;/div&gt;&lt;div class=&quot;objectBox-element&quot;&gt;&amp;lt;/&lt;span class=&quot;nodeTag&quot;&gt;&#039;,
					node.nodeName.toLowerCase(), &#039;&amp;gt;&lt;/span&gt;&lt;/div&gt;&#039;);
			}else{
				html.push(&#039;/&amp;gt;&lt;/div&gt;&#039;);
			}
		}else if (node.nodeType == 3){
			html.push(&#039;&lt;div class=&quot;nodeText&quot;&gt;&#039;, escapeHTML(node.nodeValue),
				&#039;&lt;/div&gt;&#039;);
		}
	}

	// ***************************************************************************

	function addEvent(object, name, handler){
		if(document.all){
			object.attachEvent(&quot;on&quot;+name, handler);
		}else{
			object.addEventListener(name, handler, false);
		}
	}

	function removeEvent(object, name, handler){
		if(document.all){
			object.detachEvent(&quot;on&quot;+name, handler);
		}else{
			object.removeEventListener(name, handler, false);
		}
	}

	function cancelEvent(event){
		if(document.all){
			event.cancelBubble = true;
		}else{
			event.stopPropagation();
		}
	}

	function onError(msg, href, lineNo){
		var lastSlash = href.lastIndexOf(&quot;/&quot;);
		var fileName = lastSlash == -1 ? href : href.substr(lastSlash+1);

		var html = [
			&#039;&lt;span class=&quot;errorMessage&quot;&gt;&#039;, msg, &#039;&lt;/span&gt;&#039;,
			&#039;&lt;div class=&quot;objectBox-sourceLink&quot;&gt;&#039;, fileName, &#039; (line &#039;, lineNo, &#039;)&lt;/div&gt;&#039;
		];

		logRow(html, &quot;error&quot;);
	}


	//After converting to div instead of iframe, now getting two keydowns right away in IE 6.
	//Make sure there is a little bit of delay.
	var onKeyDownTime = new Date().getTime();

	function onKeyDown(event){
		var timestamp = (new Date()).getTime();
		if(timestamp &gt; onKeyDownTime + 200){
			event = dojo.fixEvent(event);
			var keys = dojo.keys;
			var ekc = event.keyCode;
			onKeyDownTime = timestamp;
			if(ekc == keys.F12){
				toggleConsole();
			}else if(
				(ekc == keys.NUMPAD_ENTER || ekc == 76) &amp;&amp;
				event.shiftKey &amp;&amp;
				(event.metaKey || event.ctrlKey)
			){
				focusCommandLine();
			}else{
				return;
			}
			cancelEvent(event);
		}
	}

	function onCommandLineKeyDown(e){
		var dk = dojo.keys;
		if(e.keyCode == 13 &amp;&amp; commandLine.value){
			addToHistory(commandLine.value);
			evalCommandLine();
		}else if(e.keyCode == 27){
			commandLine.value = &quot;&quot;;
		}else if(e.keyCode == dk.UP_ARROW || e.charCode == dk.UP_ARROW){
			navigateHistory(&quot;older&quot;);
		}else if(e.keyCode == dk.DOWN_ARROW || e.charCode == dk.DOWN_ARROW){
			navigateHistory(&quot;newer&quot;);
		}else if(e.keyCode == dk.HOME || e.charCode == dk.HOME){
			historyPosition = 1;
			navigateHistory(&quot;older&quot;);
		}else if(e.keyCode == dk.END || e.charCode == dk.END){
			historyPosition = 999999;
			navigateHistory(&quot;newer&quot;);
		}
	}

	var historyPosition = -1;
	var historyCommandLine = null;

	function addToHistory(value){
		var history = cookie(&quot;firebug_history&quot;);
		history = (history) ? dojo.fromJson(history) : [];
		var pos = dojo.indexOf(history, value);
		if (pos != -1){
			history.splice(pos, 1);
		}
		history.push(value);
		cookie(&quot;firebug_history&quot;, dojo.toJson(history), 30);
		while(history.length &amp;&amp; !cookie(&quot;firebug_history&quot;)){
			history.shift();
			cookie(&quot;firebug_history&quot;, dojo.toJson(history), 30);
		}
		historyCommandLine = null;
		historyPosition = -1;
	}

	function navigateHistory(direction){
		var history = cookie(&quot;firebug_history&quot;);
		history = (history) ? dojo.fromJson(history) : [];
		if(!history.length){
			return;
		}

		if(historyCommandLine === null){
			historyCommandLine = commandLine.value;
		}

		if(historyPosition == -1){
			historyPosition = history.length;
		}

		if(direction == &quot;older&quot;){
			--historyPosition;
			if(historyPosition &lt; 0){
				historyPosition = 0;
			}
		}else if(direction == &quot;newer&quot;){
			++historyPosition;
			if(historyPosition &gt; history.length){
				historyPosition = history.length;
			}
		}

		if(historyPosition == history.length){
			commandLine.value = historyCommandLine;
			historyCommandLine = null;
		}else{
			commandLine.value = history[historyPosition];
		}
	}

	function cookie(name, value){
		var c = document.cookie;
		if(arguments.length == 1){
			var matches = c.match(new RegExp(&quot;(?:^|; )&quot; + name + &quot;=([^;]*)&quot;));
			return matches ? decodeURIComponent(matches[1]) : undefined; // String or undefined
		}else{
			var d = new Date();
			d.setMonth(d.getMonth()+1);
			document.cookie = name + &quot;=&quot; + encodeURIComponent(value) + ((d.toUtcString) ? &quot;; expires=&quot; + d.toUTCString() : &quot;&quot;);
		}
	}

	function isArray(it){
		return it &amp;&amp; it instanceof Array || typeof it == &quot;array&quot;;
	}

	//***************************************************************************************************
	// Print Object Helpers
	function objectLength(o){
		var cnt = 0;
		for(var nm in o){
			cnt++;
		}
		return cnt;
	}

	function printObject(o, i, txt, used){
		// Recursively trace object, indenting to represent depth for display in object inspector
		var ind = &quot; \t&quot;;
		txt = txt || &quot;&quot;;
		i = i || ind;
		used = used || [];
		var opnCls;

		if(o &amp;&amp; o.nodeType == 1){
			var html = [];
			appendNode(o, html);
			return html.join(&quot;&quot;);
		}

		var br=&quot;,\n&quot;, cnt = 0, length = objectLength(o);

		if(o instanceof Date){
			return i + o.toString() + br;
		}
		looking:
		for(var nm in o){
			cnt++;
			if(cnt==length){br = &quot;\n&quot;;}
			if(o[nm] === window || o[nm] === document){
				// do nothing
			}else if(o[nm] === null){
				txt += i+nm + &quot; : NULL&quot; + br;
			}else if(o[nm] &amp;&amp; o[nm].nodeType){
				if(o[nm].nodeType == 1){
					//txt += i+nm + &quot; : &lt; &quot;+o[nm].tagName+&quot; id=\&quot;&quot;+ o[nm].id+&quot;\&quot; /&gt;&quot; + br;
				}else if(o[nm].nodeType == 3){
					txt += i+nm + &quot; : [ TextNode &quot;+o[nm].data + &quot; ]&quot; + br;
				}

			}else if(typeof o[nm] == &quot;object&quot; &amp;&amp; (o[nm] instanceof String || o[nm] instanceof Number || o[nm] instanceof Boolean)){
				txt += i+nm + &quot; : &quot; + o[nm] + &quot;,&quot; + br;

			}else if(o[nm] instanceof Date){
				txt += i+nm + &quot; : &quot; + o[nm].toString() + br;

			}else if(typeof(o[nm]) == &quot;object&quot; &amp;&amp; o[nm]){
				for(var j = 0, seen; seen = used[j]; j++){
					if(o[nm] === seen){
						txt += i+nm + &quot; : RECURSION&quot; + br;
						continue looking;
					}
				}
				used.push(o[nm]);

				opnCls = (isArray(o[nm]))?[&quot;[&quot;,&quot;]&quot;]:[&quot;{&quot;,&quot;}&quot;];
				txt += i+nm +&quot; : &quot; + opnCls[0] + &quot;\n&quot;;//non-standard break, (no comma)
				txt += printObject(o[nm], i+ind, &quot;&quot;, used);
				txt += i + opnCls[1] + br;

			}else if(typeof o[nm] == &quot;undefined&quot;){
				txt += i+nm + &quot; : undefined&quot; + br;
			}else if(nm == &quot;toString&quot; &amp;&amp; typeof o[nm] == &quot;function&quot;){
				var toString = o[nm]();
				if(typeof toString == &quot;string&quot; &amp;&amp; toString.match(/function ?(.*?)\(/)){
					toString = escapeHTML(getObjectAbbr(o[nm]));
				}
				txt += i+nm +&quot; : &quot; + toString + br;
			}else{
				txt += i+nm +&quot; : &quot;+ escapeHTML(getObjectAbbr(o[nm])) + br;
			}
		}
		return txt;
	}

	function getObjectAbbr(obj){
		// Gets an abbreviation of an object for display in log
		// X items in object, including id
		// X items in an array
		// TODO: Firebug Sr. actually goes by char count
		var isError = (obj instanceof Error);
		if(obj.nodeType == 1){
			return escapeHTML(&#039;&lt; &#039;+obj.tagName.toLowerCase()+&#039; id=\&quot;&#039;+ obj.id+ &#039;\&quot; /&gt;&#039;);
		}
		if(obj.nodeType == 3){
			return escapeHTML(&#039;[TextNode: &quot;&#039;+obj.nodeValue+&#039;&quot;]&#039;);
		}
		var nm = (obj &amp;&amp; (obj.id || obj.name || obj.ObjectID || obj.widgetId));
		if(!isError &amp;&amp; nm){ return &quot;{&quot;+nm+&quot;}&quot;;	}

		var obCnt = 2;
		var arCnt = 4;
		var cnt = 0;

		if(isError){
			nm = &quot;[ Error: &quot;+(obj.message || obj.description || obj)+&quot; ]&quot;;
		}else if(isArray(obj)){
			nm = &quot;[&quot; + obj.slice(0,arCnt).join(&quot;,&quot;);
			if(obj.length &gt; arCnt){
				nm += &quot; ... (&quot;+obj.length+&quot; items)&quot;;
			}
			nm += &quot;]&quot;;
		}else if(typeof obj == &quot;function&quot;){
			nm = obj + &quot;&quot;;
			var reg = /function\s*([^\(]*)(\([^\)]*\))[^\{]*\{/;
			var m = reg.exec(nm);
			if(m){
				if(!m[1]){
					m[1] = &quot;function&quot;;
				}
				nm = m[1] + m[2];
			}else{
				nm = &quot;function()&quot;;
			}
		}else if(typeof obj != &quot;object&quot; || typeof obj == &quot;string&quot;){
			nm = obj + &quot;&quot;;
		}else{
			nm = &quot;{&quot;;
			for(var i in obj){
				cnt++;
				if(cnt &gt; obCnt){ break; }
				nm += i+&quot;:&quot;+escapeHTML(obj[i])+&quot;  &quot;;
			}
			nm+=&quot;}&quot;;
		}

		return nm;
	}

	//*************************************************************************************

	//window.onerror = onError;

	addEvent(document, has(&quot;ie&quot;) || has(&quot;safari&quot;) ? &quot;keydown&quot; : &quot;keypress&quot;, onKeyDown);

	if(	(document.documentElement.getAttribute(&quot;debug&quot;) == &quot;true&quot;)||
		(dojo.config.isDebug)
	){
		toggleConsole(true);
	}

	dojo.addOnWindowUnload(function(){
		// Erase the globals and event handlers I created, to prevent spurious leak warnings
		removeEvent(document, has(&quot;ie&quot;) || has(&quot;safari&quot;) ? &quot;keydown&quot; : &quot;keypress&quot;, onKeyDown);
		window.onFirebugResize = null;
		window.console = null;
	});

});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
