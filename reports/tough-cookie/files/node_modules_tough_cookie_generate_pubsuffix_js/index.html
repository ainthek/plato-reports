<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/tough-cookie/generate-pubsuffix.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/tough-cookie/generate-pubsuffix.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">55.51</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">219</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">33.39</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.71</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*
 * Copyright GoInstant, Inc. and other contributors. All rights reserved.
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the &quot;Software&quot;), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
&#039;use strict&#039;;
var fs = require(&#039;fs&#039;);
var assert = require(&#039;assert&#039;);
var punycode = require(&#039;punycode&#039;);

fs.readFile(&#039;./public-suffix.txt&#039;, &#039;utf8&#039;, function(err,string) {
  if (err) {
    throw err;
  }
  var lines = string.split(&quot;\n&quot;);
  process.nextTick(function() {
    processList(lines);
  });
});

var index = {};

var COMMENT = new RegExp(&#039;//.+&#039;);
function processList(lines) {
  while (lines.length) {
    var line = lines.shift();
    line = line.replace(COMMENT,&#039;&#039;).trim();
    if (!line) {
      continue;
    }
    addToIndex(index,line);
  }

  pubSufTest();

  var w = fs.createWriteStream(&#039;./lib/pubsuffix.js&#039;,{
    flags: &#039;w&#039;,
    encoding: &#039;utf8&#039;,
    mode: parseInt(&#039;644&#039;,8)
  });
  w.on(&#039;end&#039;, process.exit);
  w.write(&quot;/****************************************************\n&quot;);
  w.write(&quot; * AUTOMATICALLY GENERATED by generate-pubsuffix.js *\n&quot;);
  w.write(&quot; *                  DO NOT EDIT!                    *\n&quot;);
  w.write(&quot; ****************************************************/\n\n&quot;);

  w.write(&quot;module.exports.getPublicSuffix = &quot;);
  w.write(getPublicSuffix.toString());
  w.write(&quot;;\n\n&quot;);

  w.write(&quot;// The following generated structure is used under the MPL version 1.1\n&quot;);
  w.write(&quot;// See public-suffix.txt for more information\n\n&quot;);
  w.write(&quot;var index = module.exports.index = Object.freeze(\n&quot;);
  w.write(JSON.stringify(index));
  w.write(&quot;);\n\n&quot;);
  w.write(&quot;// END of automatically generated file\n&quot;);

  w.end();
}

function addToIndex(index,line) {
  var prefix = &#039;&#039;;
  if (line.replace(/^(!|\*\.)/)) {
    prefix = RegExp.$1;
    line = line.slice(prefix.length);
  }
  line = prefix + punycode.toASCII(line);

  if (line.substr(0,1) == &#039;!&#039;) {
    index[line.substr(1)] = false;
  } else {
    index[line] = true;
  }
}

// include the licence in the function since it gets written to pubsuffix.js
function getPublicSuffix(domain) {
  /*
   * Copyright GoInstant, Inc. and other contributors. All rights reserved.
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the &quot;Software&quot;), to
   * deal in the Software without restriction, including without limitation the
   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
   * sell copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
   * IN THE SOFTWARE.
   */
  if (!domain) {
    return null;
  }
  if (domain.match(/^\./)) {
    return null;
  }

  domain = domain.toLowerCase();
  var parts = domain.split(&#039;.&#039;).reverse();

  var suffix = &#039;&#039;;
  var suffixLen = 0;
  for (var i=0; i&lt;parts.length; i++) {
    var part = parts[i];
    var starstr = &#039;*&#039;+suffix;
    var partstr = part+suffix;

    if (index[starstr]) { // star rule matches
      suffixLen = i+1;
      if (index[partstr] === false) { // exception rule matches (NB: false, not undefined)
        suffixLen--;
      }
    } else if (index[partstr]) { // exact match, not exception
      suffixLen = i+1;
    }

    suffix = &#039;.&#039;+part+suffix;
  }

  if (index[&#039;*&#039;+suffix]) { // *.domain exists (e.g. *.kyoto.jp for domain=&#039;kyoto.jp&#039;);
    return null;
  }

  if (suffixLen &amp;&amp; parts.length &gt; suffixLen) {
    return parts.slice(0,suffixLen+1).reverse().join(&#039;.&#039;);
  }

  return null;
}

function checkPublicSuffix(give,get) {
  var got = getPublicSuffix(give);
  assert.equal(got, get, give+&#039; should be &#039;+(get==null?&#039;NULL&#039;:get)+&#039; but got &#039;+got);
}

// pubSufTest() was converted to JavaScript from http://publicsuffix.org/list/test.txt
function pubSufTest() {
  // For this function-scope and this function-scope ONLY:
  // Any copyright is dedicated to the Public Domain.
  // http://creativecommons.org/publicdomain/zero/1.0/

  // NULL input.
  checkPublicSuffix(null, null);
  // Mixed case.
  checkPublicSuffix(&#039;COM&#039;, null);
  checkPublicSuffix(&#039;example.COM&#039;, &#039;example.com&#039;);
  checkPublicSuffix(&#039;WwW.example.COM&#039;, &#039;example.com&#039;);
  // Leading dot.
  checkPublicSuffix(&#039;.com&#039;, null);
  checkPublicSuffix(&#039;.example&#039;, null);
  checkPublicSuffix(&#039;.example.com&#039;, null);
  checkPublicSuffix(&#039;.example.example&#039;, null);
  // Unlisted TLD.
  checkPublicSuffix(&#039;example&#039;, null);
  checkPublicSuffix(&#039;example.example&#039;, null);
  checkPublicSuffix(&#039;b.example.example&#039;, null);
  checkPublicSuffix(&#039;a.b.example.example&#039;, null);
  // Listed, but non-Internet, TLD.
  checkPublicSuffix(&#039;local&#039;, null);
  checkPublicSuffix(&#039;example.local&#039;, null);
  checkPublicSuffix(&#039;b.example.local&#039;, null);
  checkPublicSuffix(&#039;a.b.example.local&#039;, null);
  // TLD with only 1 rule.
  checkPublicSuffix(&#039;biz&#039;, null);
  checkPublicSuffix(&#039;domain.biz&#039;, &#039;domain.biz&#039;);
  checkPublicSuffix(&#039;b.domain.biz&#039;, &#039;domain.biz&#039;);
  checkPublicSuffix(&#039;a.b.domain.biz&#039;, &#039;domain.biz&#039;);
  // TLD with some 2-level rules.
  checkPublicSuffix(&#039;com&#039;, null);
  checkPublicSuffix(&#039;example.com&#039;, &#039;example.com&#039;);
  checkPublicSuffix(&#039;b.example.com&#039;, &#039;example.com&#039;);
  checkPublicSuffix(&#039;a.b.example.com&#039;, &#039;example.com&#039;);
  checkPublicSuffix(&#039;uk.com&#039;, null);
  checkPublicSuffix(&#039;example.uk.com&#039;, &#039;example.uk.com&#039;);
  checkPublicSuffix(&#039;b.example.uk.com&#039;, &#039;example.uk.com&#039;);
  checkPublicSuffix(&#039;a.b.example.uk.com&#039;, &#039;example.uk.com&#039;);
  checkPublicSuffix(&#039;test.ac&#039;, &#039;test.ac&#039;);
  // TLD with only 1 (wildcard) rule.
  checkPublicSuffix(&#039;cy&#039;, null);
  checkPublicSuffix(&#039;c.cy&#039;, null);
  checkPublicSuffix(&#039;b.c.cy&#039;, &#039;b.c.cy&#039;);
  checkPublicSuffix(&#039;a.b.c.cy&#039;, &#039;b.c.cy&#039;);
  // More complex TLD.
  checkPublicSuffix(&#039;jp&#039;, null);
  checkPublicSuffix(&#039;test.jp&#039;, &#039;test.jp&#039;);
  checkPublicSuffix(&#039;www.test.jp&#039;, &#039;test.jp&#039;);
  checkPublicSuffix(&#039;ac.jp&#039;, null);
  checkPublicSuffix(&#039;test.ac.jp&#039;, &#039;test.ac.jp&#039;);
  checkPublicSuffix(&#039;www.test.ac.jp&#039;, &#039;test.ac.jp&#039;);
  checkPublicSuffix(&#039;kyoto.jp&#039;, null);
  checkPublicSuffix(&#039;c.kyoto.jp&#039;, null);
  checkPublicSuffix(&#039;b.c.kyoto.jp&#039;, &#039;b.c.kyoto.jp&#039;);
  checkPublicSuffix(&#039;a.b.c.kyoto.jp&#039;, &#039;b.c.kyoto.jp&#039;);
  checkPublicSuffix(&#039;pref.kyoto.jp&#039;, &#039;pref.kyoto.jp&#039;);  // Exception rule.
  checkPublicSuffix(&#039;www.pref.kyoto.jp&#039;, &#039;pref.kyoto.jp&#039;);  // Exception rule.
  checkPublicSuffix(&#039;city.kyoto.jp&#039;, &#039;city.kyoto.jp&#039;);  // Exception rule.
  checkPublicSuffix(&#039;www.city.kyoto.jp&#039;, &#039;city.kyoto.jp&#039;);  // Exception rule.
  // TLD with a wildcard rule and exceptions.
  checkPublicSuffix(&#039;om&#039;, null);
  checkPublicSuffix(&#039;test.om&#039;, null);
  checkPublicSuffix(&#039;b.test.om&#039;, &#039;b.test.om&#039;);
  checkPublicSuffix(&#039;a.b.test.om&#039;, &#039;b.test.om&#039;);
  checkPublicSuffix(&#039;songfest.om&#039;, &#039;songfest.om&#039;);
  checkPublicSuffix(&#039;www.songfest.om&#039;, &#039;songfest.om&#039;);
  // US K12.
  checkPublicSuffix(&#039;us&#039;, null);
  checkPublicSuffix(&#039;test.us&#039;, &#039;test.us&#039;);
  checkPublicSuffix(&#039;www.test.us&#039;, &#039;test.us&#039;);
  checkPublicSuffix(&#039;ak.us&#039;, null);
  checkPublicSuffix(&#039;test.ak.us&#039;, &#039;test.ak.us&#039;);
  checkPublicSuffix(&#039;www.test.ak.us&#039;, &#039;test.ak.us&#039;);
  checkPublicSuffix(&#039;k12.ak.us&#039;, null);
  checkPublicSuffix(&#039;test.k12.ak.us&#039;, &#039;test.k12.ak.us&#039;);
  checkPublicSuffix(&#039;www.test.k12.ak.us&#039;, &#039;test.k12.ak.us&#039;);


}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
