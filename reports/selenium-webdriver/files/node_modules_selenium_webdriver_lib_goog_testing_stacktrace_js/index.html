<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/selenium-webdriver/lib/goog/testing/stacktrace.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/selenium-webdriver/lib/goog/testing/stacktrace.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">62.63</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">575</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">67.23</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">4.26</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// Copyright 2009 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Tools for parsing and pretty printing error stack traces.
 *
 */

goog.provide(&#039;goog.testing.stacktrace&#039;);
goog.provide(&#039;goog.testing.stacktrace.Frame&#039;);



/**
 * Class representing one stack frame.
 * @param {string} context Context object, empty in case of global functions or
 *     if the browser doesn&#039;t provide this information.
 * @param {string} name Function name, empty in case of anonymous functions.
 * @param {string} alias Alias of the function if available. For example the
 *     function name will be &#039;c&#039; and the alias will be &#039;b&#039; if the function is
 *     defined as &lt;code&gt;a.b = function c() {};&lt;/code&gt;.
 * @param {string} args Arguments of the function in parentheses if available.
 * @param {string} path File path or URL including line number and optionally
 *     column number separated by colons.
 * @constructor
 * @final
 */
goog.testing.stacktrace.Frame = function(context, name, alias, args, path) {
  this.context_ = context;
  this.name_ = name;
  this.alias_ = alias;
  this.args_ = args;
  this.path_ = path;
};


/**
 * @return {string} The function name or empty string if the function is
 *     anonymous and the object field which it&#039;s assigned to is unknown.
 */
goog.testing.stacktrace.Frame.prototype.getName = function() {
  return this.name_;
};


/**
 * @return {boolean} Whether the stack frame contains an anonymous function.
 */
goog.testing.stacktrace.Frame.prototype.isAnonymous = function() {
  return !this.name_ || this.context_ == &#039;[object Object]&#039;;
};


/**
 * Brings one frame of the stack trace into a common format across browsers.
 * @return {string} Pretty printed stack frame.
 */
goog.testing.stacktrace.Frame.prototype.toCanonicalString = function() {
  var htmlEscape = goog.testing.stacktrace.htmlEscape_;
  var deobfuscate = goog.testing.stacktrace.maybeDeobfuscateFunctionName_;

  var canonical = [
    this.context_ ? htmlEscape(this.context_) + &#039;.&#039; : &#039;&#039;,
    this.name_ ? htmlEscape(deobfuscate(this.name_)) : &#039;anonymous&#039;,
    htmlEscape(this.args_),
    this.alias_ ? &#039; [as &#039; + htmlEscape(deobfuscate(this.alias_)) + &#039;]&#039; : &#039;&#039;
  ];

  if (this.path_) {
    canonical.push(&#039; at &#039;);
    canonical.push(htmlEscape(this.path_));
  }
  return canonical.join(&#039;&#039;);
};


/**
 * Maximum number of steps while the call chain is followed.
 * @private {number}
 * @const
 */
goog.testing.stacktrace.MAX_DEPTH_ = 20;


/**
 * Maximum length of a string that can be matched with a RegExp on
 * Firefox 3x. Exceeding this approximate length will cause string.match
 * to exceed Firefox&#039;s stack quota. This situation can be encountered
 * when goog.globalEval is invoked with a long argument; such as
 * when loading a module.
 * @private {number}
 * @const
 */
goog.testing.stacktrace.MAX_FIREFOX_FRAMESTRING_LENGTH_ = 500000;


/**
 * RegExp pattern for JavaScript identifiers. We don&#039;t support Unicode
 * identifiers defined in ECMAScript v3.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.IDENTIFIER_PATTERN_ = &#039;[a-zA-Z_$][\\w$]*&#039;;


/**
 * RegExp pattern for function name alias in the V8 stack trace.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.V8_ALIAS_PATTERN_ =
    &#039;(?: \\[as (&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)\\])?&#039;;


/**
 * RegExp pattern for the context of a function call in a V8 stack trace.
 * Creates an optional submatch for the namespace identifier including the
 * &quot;new&quot; keyword for constructor calls (e.g. &quot;new foo.Bar&quot;).
 * @private {string}
 * @const
 */
goog.testing.stacktrace.V8_CONTEXT_PATTERN_ =
    &#039;(?:((?:new )?(?:\\[object Object\\]|&#039; +
    goog.testing.stacktrace.IDENTIFIER_PATTERN_ +
    &#039;(?:\\.&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)*))\\.)?&#039;;


/**
 * RegExp pattern for function names and constructor calls in the V8 stack
 * trace.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.V8_FUNCTION_NAME_PATTERN_ =
    &#039;(?:new )?(?:&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ +
    &#039;|&lt;anonymous&gt;)&#039;;


/**
 * RegExp pattern for function call in the V8 stack trace. Creates 3 submatches
 * with context object (optional), function name and function alias (optional).
 * @private {string}
 * @const
 */
goog.testing.stacktrace.V8_FUNCTION_CALL_PATTERN_ =
    &#039; &#039; + goog.testing.stacktrace.V8_CONTEXT_PATTERN_ +
    &#039;(&#039; + goog.testing.stacktrace.V8_FUNCTION_NAME_PATTERN_ + &#039;)&#039; +
    goog.testing.stacktrace.V8_ALIAS_PATTERN_;


/**
 * RegExp pattern for an URL + position inside the file.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.URL_PATTERN_ =
    &#039;((?:http|https|file)://[^\\s)]+|javascript:.*)&#039;;


/**
 * RegExp pattern for an URL + line number + column number in V8.
 * The URL is either in submatch 1 or submatch 2.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.CHROME_URL_PATTERN_ = &#039; (?:&#039; +
    &#039;\\(unknown source\\)&#039; + &#039;|&#039; +
    &#039;\\(native\\)&#039; + &#039;|&#039; +
    &#039;\\((.+)\\)|(.+))&#039;;


/**
 * Regular expression for parsing one stack frame in V8. For more information
 * on V8 stack frame formats, see
 * https://code.google.com/p/v8/wiki/JavaScriptStackTraceApi.
 * @private {!RegExp}
 * @const
 */
goog.testing.stacktrace.V8_STACK_FRAME_REGEXP_ = new RegExp(&#039;^    at&#039; +
    &#039;(?:&#039; + goog.testing.stacktrace.V8_FUNCTION_CALL_PATTERN_ + &#039;)?&#039; +
    goog.testing.stacktrace.CHROME_URL_PATTERN_ + &#039;$&#039;);


/**
 * RegExp pattern for function call in the Firefox stack trace.
 * Creates 2 submatches with function name (optional) and arguments.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.FIREFOX_FUNCTION_CALL_PATTERN_ =
    &#039;(&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)?&#039; +
    &#039;(\\(.*\\))?@&#039;;


/**
 * Regular expression for parsing one stack frame in Firefox.
 * @private {!RegExp}
 * @const
 */
goog.testing.stacktrace.FIREFOX_STACK_FRAME_REGEXP_ = new RegExp(&#039;^&#039; +
    goog.testing.stacktrace.FIREFOX_FUNCTION_CALL_PATTERN_ +
    &#039;(?::0|&#039; + goog.testing.stacktrace.URL_PATTERN_ + &#039;)$&#039;);


/**
 * RegExp pattern for an anonymous function call in an Opera stack frame.
 * Creates 2 (optional) submatches: the context object and function name.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.OPERA_ANONYMOUS_FUNCTION_NAME_PATTERN_ =
    &#039;&lt;anonymous function(?:\\: &#039; +
    &#039;(?:(&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ +
    &#039;(?:\\.&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)*)\\.)?&#039; +
    &#039;(&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;))?&gt;&#039;;


/**
 * RegExp pattern for a function call in an Opera stack frame.
 * Creates 4 (optional) submatches: the function name (if not anonymous),
 * the aliased context object and function name (if anonymous), and the
 * function call arguments.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.OPERA_FUNCTION_CALL_PATTERN_ =
    &#039;(?:(?:(&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)|&#039; +
    goog.testing.stacktrace.OPERA_ANONYMOUS_FUNCTION_NAME_PATTERN_ +
    &#039;)(\\(.*\\)))?@&#039;;


/**
 * Regular expression for parsing on stack frame in Opera 11.68 - 12.17.
 * Newer versions of Opera use V8 and stack frames should match against
 * goog.testing.stacktrace.V8_STACK_FRAME_REGEXP_.
 * @private {!RegExp}
 * @const
 */
goog.testing.stacktrace.OPERA_STACK_FRAME_REGEXP_ = new RegExp(&#039;^&#039; +
    goog.testing.stacktrace.OPERA_FUNCTION_CALL_PATTERN_ +
    goog.testing.stacktrace.URL_PATTERN_ + &#039;?$&#039;);


/**
 * Regular expression for finding the function name in its source.
 * @private {!RegExp}
 * @const
 */
goog.testing.stacktrace.FUNCTION_SOURCE_REGEXP_ = new RegExp(
    &#039;^function (&#039; + goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;)&#039;);


/**
 * RegExp pattern for function call in a IE stack trace. This expression allows
 * for identifiers like &#039;Anonymous function&#039;, &#039;eval code&#039;, and &#039;Global code&#039;.
 * @private {string}
 * @const
 */
goog.testing.stacktrace.IE_FUNCTION_CALL_PATTERN_ = &#039;(&#039; +
    goog.testing.stacktrace.IDENTIFIER_PATTERN_ + &#039;(?:\\s+\\w+)*)&#039;;


/**
 * Regular expression for parsing a stack frame in IE.
 * @private {!RegExp}
 * @const
 */
goog.testing.stacktrace.IE_STACK_FRAME_REGEXP_ = new RegExp(&#039;^   at &#039; +
    goog.testing.stacktrace.IE_FUNCTION_CALL_PATTERN_ +
    &#039;\\s*\\((eval code:[^)]*|&#039; + goog.testing.stacktrace.URL_PATTERN_ +
    &#039;)\\)?$&#039;);


/**
 * Creates a stack trace by following the call chain. Based on
 * {@link goog.debug.getStacktrace}.
 * @return {!Array.&lt;!goog.testing.stacktrace.Frame&gt;} Stack frames.
 * @private
 * @suppress {es5Strict}
 */
goog.testing.stacktrace.followCallChain_ = function() {
  var frames = [];
  var fn = arguments.callee.caller;
  var depth = 0;

  while (fn &amp;&amp; depth &lt; goog.testing.stacktrace.MAX_DEPTH_) {
    var fnString = Function.prototype.toString.call(fn);
    var match = fnString.match(goog.testing.stacktrace.FUNCTION_SOURCE_REGEXP_);
    var functionName = match ? match[1] : &#039;&#039;;

    var argsBuilder = [&#039;(&#039;];
    if (fn.arguments) {
      for (var i = 0; i &lt; fn.arguments.length; i++) {
        var arg = fn.arguments[i];
        if (i &gt; 0) {
          argsBuilder.push(&#039;, &#039;);
        }
        if (goog.isString(arg)) {
          argsBuilder.push(&#039;&quot;&#039;, arg, &#039;&quot;&#039;);
        } else {
          // Some args are mocks, and we don&#039;t want to fail from them not having
          // expected a call to toString, so instead insert a static string.
          if (arg &amp;&amp; arg[&#039;$replay&#039;]) {
            argsBuilder.push(&#039;goog.testing.Mock&#039;);
          } else {
            argsBuilder.push(String(arg));
          }
        }
      }
    } else {
      // Opera 10 doesn&#039;t know the arguments of native functions.
      argsBuilder.push(&#039;unknown&#039;);
    }
    argsBuilder.push(&#039;)&#039;);
    var args = argsBuilder.join(&#039;&#039;);

    frames.push(new goog.testing.stacktrace.Frame(&#039;&#039;, functionName, &#039;&#039;, args,
        &#039;&#039;));

    /** @preserveTry */
    try {
      fn = fn.caller;
    } catch (e) {
      break;
    }
    depth++;
  }

  return frames;
};


/**
 * Parses one stack frame.
 * @param {string} frameStr The stack frame as string.
 * @return {goog.testing.stacktrace.Frame} Stack frame object or null if the
 *     parsing failed.
 * @private
 */
goog.testing.stacktrace.parseStackFrame_ = function(frameStr) {
  // This match includes newer versions of Opera (15+).
  var m = frameStr.match(goog.testing.stacktrace.V8_STACK_FRAME_REGEXP_);
  if (m) {
    return new goog.testing.stacktrace.Frame(m[1] || &#039;&#039;, m[2] || &#039;&#039;, m[3] || &#039;&#039;,
        &#039;&#039;, m[4] || m[5] || m[6] || &#039;&#039;);
  }

  if (frameStr.length &gt;
      goog.testing.stacktrace.MAX_FIREFOX_FRAMESTRING_LENGTH_) {
    return goog.testing.stacktrace.parseLongFirefoxFrame_(frameStr);
  }

  m = frameStr.match(goog.testing.stacktrace.FIREFOX_STACK_FRAME_REGEXP_);
  if (m) {
    return new goog.testing.stacktrace.Frame(&#039;&#039;, m[1] || &#039;&#039;, &#039;&#039;, m[2] || &#039;&#039;,
        m[3] || &#039;&#039;);
  }

  // Match against Presto Opera 11.68 - 12.17.
  m = frameStr.match(goog.testing.stacktrace.OPERA_STACK_FRAME_REGEXP_);
  if (m) {
    return new goog.testing.stacktrace.Frame(m[2] || &#039;&#039;, m[1] || m[3] || &#039;&#039;,
        &#039;&#039;, m[4] || &#039;&#039;, m[5] || &#039;&#039;);
  }

  m = frameStr.match(goog.testing.stacktrace.IE_STACK_FRAME_REGEXP_);
  if (m) {
    return new goog.testing.stacktrace.Frame(&#039;&#039;, m[1] || &#039;&#039;, &#039;&#039;, &#039;&#039;,
        m[2] || &#039;&#039;);
  }

  return null;
};


/**
 * Parses a long firefox stack frame.
 * @param {string} frameStr The stack frame as string.
 * @return {!goog.testing.stacktrace.Frame} Stack frame object.
 * @private
 */
goog.testing.stacktrace.parseLongFirefoxFrame_ = function(frameStr) {
  var firstParen = frameStr.indexOf(&#039;(&#039;);
  var lastAmpersand = frameStr.lastIndexOf(&#039;@&#039;);
  var lastColon = frameStr.lastIndexOf(&#039;:&#039;);
  var functionName = &#039;&#039;;
  if ((firstParen &gt;= 0) &amp;&amp; (firstParen &lt; lastAmpersand)) {
    functionName = frameStr.substring(0, firstParen);
  }
  var loc = &#039;&#039;;
  if ((lastAmpersand &gt;= 0) &amp;&amp; (lastAmpersand + 1 &lt; lastColon)) {
    loc = frameStr.substring(lastAmpersand + 1);
  }
  var args = &#039;&#039;;
  if ((firstParen &gt;= 0 &amp;&amp; lastAmpersand &gt; 0) &amp;&amp;
      (firstParen &lt; lastAmpersand)) {
    args = frameStr.substring(firstParen, lastAmpersand);
  }
  return new goog.testing.stacktrace.Frame(&#039;&#039;, functionName, &#039;&#039;, args, loc);
};


/**
 * Function to deobfuscate function names.
 * @type {function(string): string}
 * @private
 */
goog.testing.stacktrace.deobfuscateFunctionName_;


/**
 * Sets function to deobfuscate function names.
 * @param {function(string): string} fn function to deobfuscate function names.
 */
goog.testing.stacktrace.setDeobfuscateFunctionName = function(fn) {
  goog.testing.stacktrace.deobfuscateFunctionName_ = fn;
};


/**
 * Deobfuscates a compiled function name with the function passed to
 * {@link #setDeobfuscateFunctionName}. Returns the original function name if
 * the deobfuscator hasn&#039;t been set.
 * @param {string} name The function name to deobfuscate.
 * @return {string} The deobfuscated function name.
 * @private
 */
goog.testing.stacktrace.maybeDeobfuscateFunctionName_ = function(name) {
  return goog.testing.stacktrace.deobfuscateFunctionName_ ?
      goog.testing.stacktrace.deobfuscateFunctionName_(name) : name;
};


/**
 * Escapes the special character in HTML.
 * @param {string} text Plain text.
 * @return {string} Escaped text.
 * @private
 */
goog.testing.stacktrace.htmlEscape_ = function(text) {
  return text.replace(/&amp;/g, &#039;&amp;amp;&#039;).
             replace(/&lt;/g, &#039;&amp;lt;&#039;).
             replace(/&gt;/g, &#039;&amp;gt;&#039;).
             replace(/&quot;/g, &#039;&amp;quot;&#039;);
};


/**
 * Converts the stack frames into canonical format. Chops the beginning and the
 * end of it which come from the testing environment, not from the test itself.
 * @param {!Array.&lt;goog.testing.stacktrace.Frame&gt;} frames The frames.
 * @return {string} Canonical, pretty printed stack trace.
 * @private
 */
goog.testing.stacktrace.framesToString_ = function(frames) {
  // Removes the anonymous calls from the end of the stack trace (they come
  // from testrunner.js, testcase.js and asserts.js), so the stack trace will
  // end with the test... method.
  var lastIndex = frames.length - 1;
  while (frames[lastIndex] &amp;&amp; frames[lastIndex].isAnonymous()) {
    lastIndex--;
  }

  // Removes the beginning of the stack trace until the call of the private
  // _assert function (inclusive), so the stack trace will begin with a public
  // asserter. Does nothing if _assert is not present in the stack trace.
  var privateAssertIndex = -1;
  for (var i = 0; i &lt; frames.length; i++) {
    if (frames[i] &amp;&amp; frames[i].getName() == &#039;_assert&#039;) {
      privateAssertIndex = i;
      break;
    }
  }

  var canonical = [];
  for (var i = privateAssertIndex + 1; i &lt;= lastIndex; i++) {
    canonical.push(&#039;&gt; &#039;);
    if (frames[i]) {
      canonical.push(frames[i].toCanonicalString());
    } else {
      canonical.push(&#039;(unknown)&#039;);
    }
    canonical.push(&#039;\n&#039;);
  }
  return canonical.join(&#039;&#039;);
};


/**
 * Parses the browser&#039;s native stack trace.
 * @param {string} stack Stack trace.
 * @return {!Array.&lt;goog.testing.stacktrace.Frame&gt;} Stack frames. The
 *     unrecognized frames will be nulled out.
 * @private
 */
goog.testing.stacktrace.parse_ = function(stack) {
  var lines = stack.replace(/\s*$/, &#039;&#039;).split(&#039;\n&#039;);
  var frames = [];
  for (var i = 0; i &lt; lines.length; i++) {
    frames.push(goog.testing.stacktrace.parseStackFrame_(lines[i]));
  }
  return frames;
};


/**
 * Brings the stack trace into a common format across browsers.
 * @param {string} stack Browser-specific stack trace.
 * @return {string} Same stack trace in common format.
 */
goog.testing.stacktrace.canonicalize = function(stack) {
  var frames = goog.testing.stacktrace.parse_(stack);
  return goog.testing.stacktrace.framesToString_(frames);
};


/**
 * Returns the native stack trace.
 * @return {string|!Array.&lt;!CallSite&gt;}
 * @private
 */
goog.testing.stacktrace.getNativeStack_ = function() {
  var tmpError = new Error();
  if (tmpError.stack) {
    return tmpError.stack;
  }

  // IE10 will only create a stack trace when the Error is thrown.
  // We use null.x() to throw an exception because the closure compiler may
  // replace &quot;throw&quot; with a function call in an attempt to minimize the binary
  // size, which in turn has the side effect of adding an unwanted stack frame.
  try {
    null.x();
  } catch (e) {
    return e.stack;
  }
  return &#039;&#039;;
};


/**
 * Gets the native stack trace if available otherwise follows the call chain.
 * @return {string} The stack trace in canonical format.
 */
goog.testing.stacktrace.get = function() {
  var stack = goog.testing.stacktrace.getNativeStack_();
  var frames;
  if (!stack) {
    frames = goog.testing.stacktrace.followCallChain_();
  } else if (goog.isArray(stack)) {
    frames = goog.testing.stacktrace.callSitesToFrames_(stack);
  } else {
    frames = goog.testing.stacktrace.parse_(stack);
  }
  return goog.testing.stacktrace.framesToString_(frames);
};


/**
 * Converts an array of CallSite (elements of a stack trace in V8) to an array
 * of Frames.
 * @param {!Array.&lt;!CallSite&gt;} stack The stack as an array of CallSites.
 * @return {!Array.&lt;!goog.testing.stacktrace.Frame&gt;} The stack as an array of
 *     Frames.
 * @private
 */
goog.testing.stacktrace.callSitesToFrames_ = function(stack) {
  var frames = [];
  for (var i = 0; i &lt; stack.length; i++) {
    var callSite = stack[i];
    var functionName = callSite.getFunctionName() || &#039;unknown&#039;;
    var fileName = callSite.getFileName();
    var path = fileName ? fileName + &#039;:&#039; + callSite.getLineNumber() + &#039;:&#039; +
        callSite.getColumnNumber() : &#039;unknown&#039;;
    frames.push(
        new goog.testing.stacktrace.Frame(&#039;&#039;, functionName, &#039;&#039;, &#039;&#039;, path));
  }
  return frames;
};


goog.exportSymbol(&#039;setDeobfuscateFunctionName&#039;,
    goog.testing.stacktrace.setDeobfuscateFunctionName);</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
