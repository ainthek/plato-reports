<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/node-uuid/test/test.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/node-uuid/test/test.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">78.40</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">228</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">57.13</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.68</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">if (!this.uuid) {
  // node.js
  uuid = require(&#039;../uuid&#039;);
}

//
// x-platform log/assert shims
//

function _log(msg, type) {
  type = type || &#039;log&#039;;

  if (typeof(document) != &#039;undefined&#039;) {
    document.write(&#039;&lt;div class=&quot;&#039; + type + &#039;&quot;&gt;&#039; + msg.replace(/\n/g, &#039;&lt;br /&gt;&#039;) + &#039;&lt;/div&gt;&#039;);
  }
  if (typeof(console) != &#039;undefined&#039;) {
    var color = {
      log: &#039;\033[39m&#039;,
      warn: &#039;\033[33m&#039;,
      error: &#039;\033[31m&#039;
    };
    console[type](color[type] + msg + color.log);
  }
}

function log(msg) {_log(msg, &#039;log&#039;);}
function warn(msg) {_log(msg, &#039;warn&#039;);}
function error(msg) {_log(msg, &#039;error&#039;);}

function assert(res, msg) {
  if (!res) {
    error(&#039;FAIL: &#039; + msg);
  } else {
    log(&#039;Pass: &#039; + msg);
  }
}

//
// Unit tests
//

// Verify ordering of v1 ids created with explicit times
var TIME = 1321644961388; // 2011-11-18 11:36:01.388-08:00

function compare(name, ids) {
  ids = ids.map(function(id) {
    return id.split(&#039;-&#039;).reverse().join(&#039;-&#039;);
  }).sort();
  var sorted = ([].concat(ids)).sort();

  assert(sorted.toString() == ids.toString(), name + &#039; have expected order&#039;);
}

// Verify ordering of v1 ids created using default behavior
compare(&#039;uuids with current time&#039;, [
  uuid.v1(),
  uuid.v1(),
  uuid.v1(),
  uuid.v1(),
  uuid.v1()
]);

// Verify ordering of v1 ids created with explicit times
compare(&#039;uuids with time option&#039;, [
  uuid.v1({msecs: TIME - 10*3600*1000}),
  uuid.v1({msecs: TIME - 1}),
  uuid.v1({msecs: TIME}),
  uuid.v1({msecs: TIME + 1}),
  uuid.v1({msecs: TIME + 28*24*3600*1000})
]);

assert(
  uuid.v1({msecs: TIME}) != uuid.v1({msecs: TIME}),
  &#039;IDs created at same msec are different&#039;
);

// Verify throw if too many ids created
var thrown = false;
try {
  uuid.v1({msecs: TIME, nsecs: 10000});
} catch (e) {
  thrown = true;
}
assert(thrown, &#039;Exception thrown when &gt; 10K ids created in 1 ms&#039;);

// Verify clock regression bumps clockseq
var uidt = uuid.v1({msecs: TIME});
var uidtb = uuid.v1({msecs: TIME - 1});
assert(
  parseInt(uidtb.split(&#039;-&#039;)[3], 16) - parseInt(uidt.split(&#039;-&#039;)[3], 16) === 1,
  &#039;Clock regression by msec increments the clockseq&#039;
);

// Verify clock regression bumps clockseq
var uidtn = uuid.v1({msecs: TIME, nsecs: 10});
var uidtnb = uuid.v1({msecs: TIME, nsecs: 9});
assert(
  parseInt(uidtnb.split(&#039;-&#039;)[3], 16) - parseInt(uidtn.split(&#039;-&#039;)[3], 16) === 1,
  &#039;Clock regression by nsec increments the clockseq&#039;
);

// Verify explicit options produce expected id
var id = uuid.v1({
  msecs: 1321651533573,
  nsecs: 5432,
  clockseq: 0x385c,
  node: [ 0x61, 0xcd, 0x3c, 0xbb, 0x32, 0x10 ]
});
assert(id == &#039;d9428888-122b-11e1-b85c-61cd3cbb3210&#039;, &#039;Explicit options produce expected id&#039;);

// Verify adjacent ids across a msec boundary are 1 time unit apart
var u0 = uuid.v1({msecs: TIME, nsecs: 9999});
var u1 = uuid.v1({msecs: TIME + 1, nsecs: 0});

var before = u0.split(&#039;-&#039;)[0], after = u1.split(&#039;-&#039;)[0];
var dt = parseInt(after, 16) - parseInt(before, 16);
assert(dt === 1, &#039;Ids spanning 1ms boundary are 100ns apart&#039;);

//
// Test parse/unparse
//

id = &#039;00112233445566778899aabbccddeeff&#039;;
assert(uuid.unparse(uuid.parse(id.substr(0,10))) ==
  &#039;00112233-4400-0000-0000-000000000000&#039;, &#039;Short parse&#039;);
assert(uuid.unparse(uuid.parse(&#039;(this is the uuid -&gt; &#039; + id + id)) ==
  &#039;00112233-4455-6677-8899-aabbccddeeff&#039;, &#039;Dirty parse&#039;);

//
// Perf tests
//

var generators = {
  v1: uuid.v1,
  v4: uuid.v4
};

var UUID_FORMAT = {
  v1: /[0-9a-f]{8}-[0-9a-f]{4}-1[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,
  v4: /[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i
};

var N = 1e4;

// Get %&#039;age an actual value differs from the ideal value
function divergence(actual, ideal) {
  return Math.round(100*100*(actual - ideal)/ideal)/100;
}

function rate(msg, t) {
  log(msg + &#039;: &#039; + (N / (Date.now() - t) * 1e3 | 0) + &#039; uuids\/second&#039;);
}

for (var version in generators) {
  var counts = {}, max = 0;
  var generator = generators[version];
  var format = UUID_FORMAT[version];

  log(&#039;\nSanity check &#039; + N + &#039; &#039; + version + &#039; uuids&#039;);
  for (var i = 0, ok = 0; i &lt; N; i++) {
    id = generator();
    if (!format.test(id)) {
      throw Error(id + &#039; is not a valid UUID string&#039;);
    }

    if (id != uuid.unparse(uuid.parse(id))) {
      assert(fail, id + &#039; is not a valid id&#039;);
    }

    // Count digits for our randomness check
    if (version == &#039;v4&#039;) {
      var digits = id.replace(/-/g, &#039;&#039;).split(&#039;&#039;);
      for (var j = digits.length-1; j &gt;= 0; j--) {
        var c = digits[j];
        max = Math.max(max, counts[c] = (counts[c] || 0) + 1);
      }
    }
  }

  // Check randomness for v4 UUIDs
  if (version == &#039;v4&#039;) {
    // Limit that we get worried about randomness. (Purely empirical choice, this!)
    var limit = 2*100*Math.sqrt(1/N);

    log(&#039;\nChecking v4 randomness.  Distribution of Hex Digits (% deviation from ideal)&#039;);

    for (var i = 0; i &lt; 16; i++) {
      var c = i.toString(16);
      var bar = &#039;&#039;, n = counts[c], p = Math.round(n/max*100|0);

      // 1-3,5-8, and D-F: 1:16 odds over 30 digits
      var ideal = N*30/16;
      if (i == 4) {
        // 4: 1:1 odds on 1 digit, plus 1:16 odds on 30 digits
        ideal = N*(1 + 30/16);
      } else if (i &gt;= 8 &amp;&amp; i &lt;= 11) {
        // 8-B: 1:4 odds on 1 digit, plus 1:16 odds on 30 digits
        ideal = N*(1/4 + 30/16);
      } else {
        // Otherwise: 1:16 odds on 30 digits
        ideal = N*30/16;
      }
      var d = divergence(n, ideal);

      // Draw bar using UTF squares (just for grins)
      var s = n/max*50 | 0;
      while (s--) bar += &#039;=&#039;;

      assert(Math.abs(d) &lt; limit, c + &#039; |&#039; + bar + &#039;| &#039; + counts[c] + &#039; (&#039; + d + &#039;% &lt; &#039; + limit + &#039;%)&#039;);
    }
  }
}

// Perf tests
for (var version in generators) {
  log(&#039;\nPerformance testing &#039; + version + &#039; UUIDs&#039;);
  var generator = generators[version];
  var buf = new uuid.BufferClass(16);

  for (var i = 0, t = Date.now(); i &lt; N; i++) generator();
  rate(&#039;uuid.&#039; + version + &#039;()&#039;, t);

  for (var i = 0, t = Date.now(); i &lt; N; i++) generator(&#039;binary&#039;);
  rate(&#039;uuid.&#039; + version + &#039;(\&#039;binary\&#039;)&#039;, t);

  for (var i = 0, t = Date.now(); i &lt; N; i++) generator(&#039;binary&#039;, buf);
  rate(&#039;uuid.&#039; + version + &#039;(\&#039;binary\&#039;, buffer)&#039;, t);
}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
